\documentclass[11pt,a4paper,twoside]{article}
\usepackage{calc}
\usepackage[textwidth=37em,vmargin=35mm,bindingoffset=21mm]{geometry}
\usepackage{fontspec,paralist,enumitem,graphicx,eso-pic,datetime2,tabulary,tabularx,tabu,booktabs,sectsty,fancyhdr}
\usepackage{amsmath,amssymb}
\usepackage{xeCJK,xeCJKfntef}
\usepackage{pbox,adjustbox,tikz,tcolorbox}
\usepackage{lipsum}

\setmainfont[Numbers=Monospaced]{STIX Two Text}
\setromanfont[Numbers=Monospaced]{STIX Two Text}
\setsansfont[Numbers=Monospaced]{TeX Gyre Heros}
\setmonofont[Scale=0.88]{JetBrains Mono NL}
\setCJKmainfont[AutoFakeSlant=0.22]{Noto Serif CJK SC}
\setCJKromanfont[AutoFakeSlant=0.22]{Noto Serif CJK SC}
\setCJKsansfont[AutoFakeSlant=0.22]{Noto Sans CJK SC}
\setCJKmonofont[AutoFakeSlant=0.22]{Noto Sans CJK SC}
\setlength{\parindent}{2em}
\setlength{\parskip}{6pt}
\allsectionsfont{\sffamily\raggedright}
\setdefaultleftmargin{4em}{2em}{2em}{2em}{2em}{2em}
\frenchspacing
\sloppy
\raggedbottom




\usepackage[
	backend=biber,
	style=numeric,
	sorting=ynt
]{biblatex}




\newcommand{\markasdraft}[0]{
	\AddToShipoutPictureFG*{
		\put(30mm,30mm){%
			\rotatebox{50}{\scalebox{6}{\Huge\textcolor{red}{\fbox{DRAFT}}}}
		}
	}
}

\makeatletter
\newcommand{\@issueyear}[0]{1453}
\newcommand{\@issueid}[0]{145305}
\newcommand{\@issueserial}[0]{42}
\newcommand{\setdocmetadata}[3]{
	% argv: year, issue_id, serial_number
	\renewcommand{\@issueyear}{#1}
	\renewcommand{\@issueid}{#2}
	\renewcommand{\@issueserial}{#3}
}
\newcommand{\@setentryid}[0]{NOTSET}
\newcommand{\setentryid}[1]{
	\clearpage
	\renewcommand{\@setentryid}[0]{#1}
	\setcounter{section}{0}
}
\newcommand{\issuepath}[0]{issue/\@issueyear/\@issueid.tex.d}
\newcommand{\entrypath}[0]{issue/\@issueyear/\@issueid.tex.d/entry/\@setentryid}
\newcommand{\stdarticle}[3]{%
	\normalsize\upshape\rmfamily\mdseries%
	\noindent\parbox{\linewidth}{%
		\parskip=13pt%
		\sffamily%
		\noindent\parbox{\linewidth}{\LARGE\sffamily\bfseries\strut\raggedright#1}\par
		\noindent\parbox{\linewidth}{\large\strut\raggedright#2}\par
		\noindent\parbox{\linewidth}{\large\strut\raggedright#3}\par
	}\par
	\vskip 10pt plus 2pt
	\noindent\rule{\linewidth}{1mm}
	\vskip 30pt plus 10pt
}
\newcommand{\importarticle}[1]{
    \begin{refsection}[#1]
        \input{\issuepath/entry/#1/main.tex}
    \end{refsection}
}

\newcommand{\coverarticlerow}[2]{
	\parbox{\linewidth}{
		\flushright
		\strut\Large#1\strut~~~~
		\textbf{\normalsize#2}
	}\par
}
\newcommand{\coverarticles}[1]{
	\noindent\hfill\parbox{0.75\linewidth}{
		\parindent=0pt
		\parskip=22pt
		\Large\flushright
		#1
	}
}
\newcommand{\makecoverpage}[1]{
	\begin{titlepage}
		\newgeometry{margin=21mm}
		\sffamily
		\bfseries\noindent
		\includegraphics[width=\linewidth]{vi/dist/wm1.png}\par\vskip 20pt
		\mdseries

		% \Large
		\fontsize{40pt}{40pt}\selectfont
		\noindent\strut\@issueid
		\large

		\vfill
		#1
		% \noindent\copyright~\@issueyear~WITA Editor Board
		% \hfill
		% S/N~\@issueserial\par
	\end{titlepage}
	\restoregeometry
	\pagestyle{empty}
	\rmfamily\normalsize\mdseries\upshape\cleardoublepage
	\pagestyle{plain}
	\setcounter{page}{1}
}
\makeatother



% Article showing
\newcommand{\authorrow}[2]{%
	% argv: author, institution
	\noindent\pbox{999mm}{\strut#1~~~\small\strut(#2)}%
}

% Biblatex
\newcommand{\addcitebib}[1]{\addbibresource[label=#1]{\issuepath/entry/#1/cite.bib}}
